services:
  apiservice:
    build:
      dockerfile: KaruRestauranteWebApp.ApiService/Dockerfile
    ports:
      - "5001:8080"
    environment:
      - TZ=America/Costa_Rica
      - ConnectionStrings__DefaultConnection=Server=host.docker.internal,1433;Database=dbWebAppRestauranteKaru;User Id = Karu; Password=Karu05#.;TrustServerCertificate=True;
    volumes:
        - /etc/localtime:/etc/localtime:ro
    extra_hosts:
      - "host.docker.internal:host-gateway"
    restart: always

  webfrontend:
    build: 
      dockerfile: KaruRestauranteWebApp.Web/Dockerfile
    ports:
      - "5000:8080"
    depends_on:
      - apiservice
    environment:
      - TZ=America/Costa_Rica
      - API_BASE_URL=http://apiservice:8080
    volumes:
      - /etc/localtime:/etc/localtime:ro
    restart: always
